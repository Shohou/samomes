{"version":3,"sources":["webpack:///./src/views/Remineralization.vue?6b45","webpack:///src/views/Remineralization.vue","webpack:///./src/views/Remineralization.vue?c8d7","webpack:///./src/views/Remineralization.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","recipes","length","attrs","class","$vuetify","breakpoint","_v","name","params","open","_e","tanks","model","value","callback","$$v","tankVolume","_n","expression","_s","waterChangeVolume","toFixed","scopedSlots","_u","key","fn","staticStyle","waterChange","proxy","osmosisChangeVolume","osmosisChange","ghInit","ghWaterChange","recipesSelected","_l","recipeSelected","index","amountDay","volume","type","on","$event","inputRecipeAmountDay","Object","keys","totalElements","ref","HARDNESS","undefined","totalHardness","hardnessHint","staticRenderFns","data","FORMULAS","COMPONENTS","dialog","tank","computed","result","totalElementsSorted","sortableResult","ion","push","convertIonName","convertIonRatio","sort","ca","hardness","mg","text","methods","countPercent","countTotalIonConcentration","amount","isNaN","component","VCol","VCombobox","VContainer","VExpandTransition","VRow","VSelect","VSimpleTable","VSlider","VSubheader","VTextField"],"mappings":"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","file":"js/chunk-2d2109ab.84ab8817.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"mb-10\"},[_c('v-row',[(_vm.recipes.length === 0)?_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\",\"offset-md\":\"2\"}},[_c('p',{staticClass:\"mb-8\",class:{'headline': _vm.$vuetify.breakpoint['xs'], 'display-2': _vm.$vuetify.breakpoint['smAndUp']}},[_vm._v(\" У вас еще нет рецептов \")]),_c('p',[_vm._v(\" Необходимо \"),(_vm.recipes.length === 0)?_c('router-link',{attrs:{\"to\":{ name: 'recipes', params: { open: true }}}},[_vm._v(\"добавить рецепт\")]):_vm._e(),_vm._v(\" и после этого можно будет реминерализовать воду. \")],1)]):_vm._e(),(_vm.recipes.length > 0)?_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"8\",\"offset-sm\":\"2\"}},[_c('v-combobox',{attrs:{\"items\":_vm.tanks,\"item-text\":\"name\",\"item-value\":\"volume\",\"label\":\"Объем аквариума\",\"hide-selected\":\"\",\"hide-details\":\"auto\",\"hint\":\"Выберите аквариум или введите объем\",\"persistent-hint\":\"\",\"suffix\":\"л\",\"return-object\":false},model:{value:(_vm.tankVolume),callback:function ($$v) {_vm.tankVolume=_vm._n($$v)},expression:\"tankVolume\"}}),_c('v-expand-transition',[(_vm.tankVolume)?_c('div',[_c('v-subheader',{staticClass:\"pl-0\"},[_vm._v(\" Объем подмены: \"+_vm._s(_vm.waterChangeVolume.toFixed(1) + ' л')+\" \")]),_c('v-slider',{staticClass:\"align-end\",attrs:{\"hide-details\":\"auto\"},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('v-text-field',{staticClass:\"mt-0 pt-0\",staticStyle:{\"width\":\"60px\"},attrs:{\"hide-details\":\"\",\"single-line\":\"\",\"suffix\":\"%\",\"type\":\"number\"},model:{value:(_vm.waterChange),callback:function ($$v) {_vm.waterChange=_vm._n($$v)},expression:\"waterChange\"}})]},proxy:true}],null,false,3556399637),model:{value:(_vm.waterChange),callback:function ($$v) {_vm.waterChange=_vm._n($$v)},expression:\"waterChange\"}}),_c('v-subheader',{staticClass:\"pl-0\"},[_vm._v(\" Доля осмоса в подмене: \"+_vm._s(_vm.osmosisChangeVolume.toFixed(1) + ' л')+\" (водопровода: \"+_vm._s((_vm.waterChangeVolume - _vm.osmosisChangeVolume).toFixed(1) + ' л')+\") \")]),_c('v-slider',{staticClass:\"align-end\",attrs:{\"hide-details\":\"auto\"},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('v-text-field',{staticClass:\"mt-0 pt-0\",staticStyle:{\"width\":\"60px\"},attrs:{\"hide-details\":\"\",\"single-line\":\"\",\"suffix\":\"%\",\"type\":\"number\"},model:{value:(_vm.osmosisChange),callback:function ($$v) {_vm.osmosisChange=_vm._n($$v)},expression:\"osmosisChange\"}})]},proxy:true}],null,false,3763818039),model:{value:(_vm.osmosisChange),callback:function ($$v) {_vm.osmosisChange=_vm._n($$v)},expression:\"osmosisChange\"}}),_c('div',{staticClass:\"d-flex\"},[_c('v-text-field',{attrs:{\"label\":\"Gh в аквариуме\",\"suffix\":\"dGh\",\"hide-details\":\"auto\"},model:{value:(_vm.ghInit),callback:function ($$v) {_vm.ghInit=_vm._n($$v)},expression:\"ghInit\"}}),_c('v-text-field',{staticClass:\"ml-3\",attrs:{\"label\":\"Gh водопровода\",\"suffix\":\"dGh\",\"hide-details\":\"auto\"},model:{value:(_vm.ghWaterChange),callback:function ($$v) {_vm.ghWaterChange=_vm._n($$v)},expression:\"ghWaterChange\"}})],1)],1):_vm._e()]),_c('v-expand-transition',[(_vm.ghInit !== null)?_c('v-select',{attrs:{\"items\":_vm.recipes,\"label\":\"Выберите рецепты\",\"item-text\":\"name\",\"multiple\":\"\",\"return-object\":true,\"hide-details\":\"auto\"},model:{value:(_vm.recipesSelected),callback:function ($$v) {_vm.recipesSelected=$$v},expression:\"recipesSelected\"}}):_vm._e()],1),_vm._l((_vm.recipesSelected),function(recipeSelected,index){return _c('v-text-field',{key:index,attrs:{\"value\":recipeSelected.amountDay,\"label\":recipeSelected.name,\"hint\":\"Введите объем или массу удобрения\",\"suffix\":recipeSelected.volume || recipeSelected.type === 'Готовое' ? 'мл' : 'г',\"hide-details\":\"auto\"},on:{\"input\":function($event){return _vm.inputRecipeAmountDay(index)}}})}),(Object.keys(_vm.totalElements).length > 0)?_c('div',{staticClass:\"mt-5\"},[_c('v-simple-table',{staticStyle:{\"background-color\":\"#fafafa\"},attrs:{\"dense\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"pl-0 text-center\"},[_vm._v(\" Элемент \")]),_c('th',{staticClass:\"text-center\"},[_vm._v(\" dGh \")]),_c('th',{staticClass:\"text-center\"},[_vm._v(\" Доза удобрения, мг/л \")])])]),_c('tbody',_vm._l((_vm.totalElementsSorted),function(ref){\nvar name = ref[0];\nvar value = ref[1];\nreturn _c('tr',{key:name,class:{'caption': _vm.$vuetify.breakpoint['xs'], 'regular': _vm.$vuetify.breakpoint['smAndUp']}},[_c('td',{staticClass:\"pl-0 text-center\"},[_vm._v(\" \"+_vm._s(name)+\" \")]),_c('td',{staticClass:\"text-center\"},[(name in _vm.HARDNESS)?[_vm._v(\" +\"+_vm._s((value / _vm.HARDNESS[name]).toFixed(2))+\" \")]:_vm._e()],2),_c('td',{staticClass:\"text-center pr-0\"},[_vm._v(\" +\"+_vm._s(value !== undefined ? (value).toFixed(3) : 0)+\" \")])])}),0)]},proxy:true}],null,false,433382232)})],1):_vm._e(),_c('v-expand-transition',[(_vm.ghInit !== null)?_c('v-text-field',{staticClass:\"mt-8\",attrs:{\"value\":_vm.totalHardness,\"label\":\"Общая жесткость\",\"hint\":_vm.hardnessHint,\"suffix\":\"dGh\",\"hide-details\":\"auto\",\"readonly\":\"\",\"outlined\":\"\",\"persistent-hint\":\"\"}}):_vm._e()],1)],2):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  Samomes\n\n  Copyright (C) 2020 Mikhail Lapshin\n\n  This program is free software: you can redistribute it and/or modify\n  it under the terms of the GNU General Public License as published by\n  the Free Software Foundation, either version 3 of the License, or\n  (at your option) any later version.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  GNU General Public License for more details.\n\n  You should have received a copy of the GNU General Public License\n  along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-->\n\n<template>\n  <v-container class=\"mb-10\">\n    <v-row>\n      <v-col v-if=\"recipes.length === 0\" cols=\"12\" md=\"8\" offset-md=\"2\">\n        <p class=\"mb-8\" :class=\"{'headline': $vuetify.breakpoint['xs'], 'display-2': $vuetify.breakpoint['smAndUp']}\">\n          У вас еще нет рецептов\n        </p>\n        <p>\n          Необходимо\n          <router-link v-if=\"recipes.length === 0\" :to=\"{ name: 'recipes', params: { open: true }}\">добавить рецепт</router-link>\n          и после этого можно будет реминерализовать воду.\n        </p>\n      </v-col>\n      <v-col v-if=\"recipes.length > 0\" cols=\"12\" sm=\"8\" offset-sm=\"2\">\n        <v-combobox\n          :items=\"tanks\"\n          v-model.number=\"tankVolume\"\n          item-text=\"name\"\n          item-value=\"volume\"\n          label=\"Объем аквариума\"\n          hide-selected\n          hide-details=\"auto\"\n          hint=\"Выберите аквариум или введите объем\"\n          persistent-hint\n          suffix=\"л\"\n          :return-object=\"false\"\n        ></v-combobox>\n        <v-expand-transition>\n          <div v-if=\"tankVolume\">\n            <v-subheader class=\"pl-0\">\n              Объем подмены: {{ waterChangeVolume.toFixed(1) + ' л' }}\n            </v-subheader>\n            <v-slider\n              v-model.number=\"waterChange\"\n              hide-details=\"auto\"\n              class=\"align-end\"\n            >\n              <template v-slot:append>\n                <v-text-field\n                  v-model.number=\"waterChange\"\n                  class=\"mt-0 pt-0\"\n                  hide-details\n                  single-line\n                  suffix=\"%\"\n                  type=\"number\"\n                  style=\"width: 60px\"\n                ></v-text-field>\n              </template>\n            </v-slider>\n            <v-subheader class=\"pl-0\">\n              Доля осмоса в подмене: {{ osmosisChangeVolume.toFixed(1) + ' л' }} (водопровода: {{ (waterChangeVolume - osmosisChangeVolume).toFixed(1) + ' л' }})\n            </v-subheader>\n            <v-slider\n              v-model.number=\"osmosisChange\"\n              hide-details=\"auto\"\n              class=\"align-end\"\n            >\n              <template v-slot:append>\n                <v-text-field\n                  v-model.number=\"osmosisChange\"\n                  class=\"mt-0 pt-0\"\n                  hide-details\n                  single-line\n                  suffix=\"%\"\n                  type=\"number\"\n                  style=\"width: 60px\"\n                ></v-text-field>\n              </template>\n            </v-slider>\n            <div class=\"d-flex\">\n              <v-text-field\n                v-model.number=\"ghInit\"\n                label=\"Gh в аквариуме\"\n                suffix=\"dGh\"\n                hide-details=\"auto\"\n              >\n              </v-text-field>\n              <v-text-field\n                v-model.number=\"ghWaterChange\"\n                label=\"Gh водопровода\"\n                suffix=\"dGh\"\n                hide-details=\"auto\"\n                class=\"ml-3\"\n              >\n              </v-text-field>\n            </div>\n          </div>\n        </v-expand-transition>\n        <v-expand-transition>\n          <v-select\n            v-if=\"ghInit !== null\"\n            :items=\"recipes\"\n            v-model=\"recipesSelected\"\n            label=\"Выберите рецепты\"\n            item-text=\"name\"\n            multiple\n            :return-object=\"true\"\n            hide-details=\"auto\"\n          ></v-select>\n        </v-expand-transition>\n        <v-text-field\n          v-for=\"(recipeSelected, index) in recipesSelected\"\n          :value=\"recipeSelected.amountDay\"\n          @input=\"inputRecipeAmountDay(index)\"\n          :label=\"recipeSelected.name\"\n          hint=\"Введите объем или массу удобрения\"\n          :suffix=\"recipeSelected.volume || recipeSelected.type === 'Готовое' ? 'мл' : 'г'\"\n          hide-details=\"auto\"\n          :key=\"index\"\n        ></v-text-field>\n        <div v-if=\"Object.keys(totalElements).length > 0\" class=\"mt-5\">\n          <v-simple-table dense style=\"background-color: #fafafa;\">\n            <template v-slot:default>\n              <thead>\n                <tr>\n                  <th class=\"pl-0 text-center\">\n                    Элемент\n                  </th>\n                  <th class=\"text-center\">\n                    dGh\n                  </th>\n                  <th class=\"text-center\">\n                    Доза удобрения, мг/л\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"[name, value] in totalElementsSorted\" :key=\"name\"\n                  :class=\"{'caption': $vuetify.breakpoint['xs'], 'regular': $vuetify.breakpoint['smAndUp']}\"\n                >\n                  <td class=\"pl-0 text-center\">\n                    {{ name }}\n                  </td>\n                  <td class=\"text-center\">\n                    <template v-if=\"name in HARDNESS\">\n                      +{{ (value / HARDNESS[name]).toFixed(2) }}\n                    </template>\n                  </td>\n                  <td class=\"text-center pr-0\">\n                    +{{ value !== undefined ? (value).toFixed(3) : 0 }}\n                  </td>\n                </tr>\n              </tbody>\n            </template>\n          </v-simple-table>\n        </div>\n        <v-expand-transition>\n          <v-text-field\n            v-if=\"ghInit !== null\"\n            :value=\"totalHardness\"\n            label=\"Общая жесткость\"\n            :hint=\"hardnessHint\"\n            suffix=\"dGh\"\n            hide-details=\"auto\"\n            readonly\n            outlined\n            persistent-hint\n            class=\"mt-8\"\n          >\n          </v-text-field>\n        </v-expand-transition>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { COMPONENTS, FORMULAS, HARDNESS } from '../constants.js'\nimport { mapState } from 'vuex'\nimport { convertIonName, convertIonRatio, countPercent, countTotalIonConcentration } from '../funcs.js'\n\nexport default {\n  name: 'remineralization',\n  data () {\n    return {\n      FORMULAS,\n      COMPONENTS,\n      HARDNESS,\n      dialog: true,\n      tankVolume: null,\n      tank: null,\n      waterChange: 30,\n      osmosisChange: 0,\n      ghInit: null,\n      ghWaterChange: 0,\n      recipesSelected: []\n    }\n  },\n  computed: {\n    ...mapState([\n      'tanks', 'recipes', 'drawer'\n    ]),\n    waterChangeVolume () {\n      return this.tankVolume * this.waterChange / 100\n    },\n    osmosisChangeVolume () {\n      return this.tankVolume * this.waterChange * this.osmosisChange / 10000\n    },\n    totalElements () {\n      let result = {}\n      for (let recipe of this.recipesSelected) {\n        for (let reagent in recipe.concentration) {\n          for (let ion in recipe.concentration[reagent]) {\n            if (!(ion in result)) {\n              result[ion] = 0\n            }\n            if (recipe.amount) {\n              result[ion] += recipe.amount * recipe.concentration[reagent][ion] / this.tankVolume\n              if ((!recipe.volume) && recipe.type === 'Самомес') {\n                result[ion] *= 1000\n              }\n            }\n          }\n        }\n      }\n      return result\n    },\n    totalElementsSorted () {\n      var sortableResult = []\n      for (var ion in this.totalElements) {\n        sortableResult.push([this.convertIonName(ion), this.convertIonRatio(ion) * this.totalElements[ion]])\n      }\n      sortableResult.sort((a, b) => b[1] - a[1])\n      return sortableResult\n    },\n    totalHardness () {\n      let ca = this.totalElements['Ca']\n      let mg = this.totalElements['Mg']\n      let hardness = 0\n      if (ca) {\n        hardness += ca / this.HARDNESS['Ca']\n      }\n      if (mg) {\n        hardness += mg / this.HARDNESS['Mg']\n      }\n      hardness = this.ghInit * (1 - this.waterChange / 100) + (this.ghWaterChange * (1 - this.osmosisChange / 100) * this.waterChange / 100) + hardness\n      return hardness.toFixed(2)\n    },\n    hardnessHint () {\n      let text = 'Gh после подмены воды'\n      if (this.totalElements['Ca'] || this.totalElements['Mg']) {\n        text += ', внесения удобрений и реминирализатора'\n      }\n      return text\n    }\n  },\n  methods: {\n    convertIonName (ion) {\n      return convertIonName(ion)\n    },\n    convertIonRatio (ion) {\n      return convertIonRatio(ion)\n    },\n    countPercent (ion) {\n      return countPercent(ion)\n    },\n    countTotalIonConcentration (ion) {\n      return countTotalIonConcentration(ion)\n    },\n    inputRecipeAmountDay (index) {\n      let recipe = this.recipesSelected[index]\n      let amount = parseFloat(event.target.value)\n      Vue.set(this.recipesSelected, index, {\n        ...recipe,\n        amount: !isNaN(amount) ? amount : ''\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\">\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remineralization.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remineralization.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Remineralization.vue?vue&type=template&id=4353c214&\"\nimport script from \"./Remineralization.vue?vue&type=script&lang=js&\"\nexport * from \"./Remineralization.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VCombobox } from 'vuetify/lib/components/VCombobox';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VExpandTransition } from 'vuetify/lib/components/transitions';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCol,VCombobox,VContainer,VExpandTransition,VRow,VSelect,VSimpleTable,VSlider,VSubheader,VTextField})\n"],"sourceRoot":""}